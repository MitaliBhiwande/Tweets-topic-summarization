<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/bootstrap-3.3.7/bootstrap-3.3.7/docs/favicon.ico">

    <title>Summary Jack</title>

    <!-- Bootstrap core CSS -->
    <link href="/bootstrap-3.3.7/bootstrap-3.3.7/docs/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="/bootstrap-3.3.7/bootstrap-3.3.7/docs/dist/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/bootstrap-3.3.7/bootstrap-3.3.7/docs/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="Summary Jack.css" rel="stylesheet">

    <script src="/bootstrap-3.3.7/bootstrap-3.3.7/docs/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Bootstrap theme</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <!-- <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li> -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container theme-showcase" role="main">

      <!-- Main jumbotron for a primary marketing message or call to action -->
      <div class="jumbotron">
        <h2>Search</h2>
        <input type="search" name="search" id="search" placeholder="enter your query here">
        <span class="input-group-btn">
                    <button class="btn btn-info btn-lg searchQuery" type="button" onclick="QuerySolr();">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>     
        
        <br>        	
        </br>
        
        <div id="Topics">
        <p>
        <button type="button" class="btn btn-lg btn-default" id="topic1">Default</button>      
        <button type="button" class="btn btn-lg btn-primary" id="primary">Primary</button>
        <button type="button" class="btn btn-lg btn-success">Success</button>
        <button type="button" class="btn btn-lg btn-info">bleh</button>
        <button type="button" class="btn btn-lg btn-warning">Warning</button>
        <button type="button" class="btn btn-lg btn-danger">Danger</button>
        <button type="button" class="btn btn-lg btn-link">Link</button>
      </p>
      </div>
</div>


      <div class="page-header">
        <h1 class="col-sm-7 col-sm-offset-4">Summary</h1>
</div>
      
      <b>Handlebars.js and Solr Demo</b><br>
Type in something reutersey and click the <b>search</b> button!<br>
<input id="searchterm" />
<button id="search">search</button>
<div id="rs"></div>

      <div class="page-header">
        <h1>Thumbnails</h1>
      </div>
      <img data-src="holder.js/200x200" class="img-thumbnail" alt="A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera">



      <!-- <div class="page-header" id="dropdown">
        <h1>Dropdown menus</h1>
      </div>
      <div class="dropdown theme-dropdown clearfix">
        <a id="dropdownMenu1" href="#" class="sr-only dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li class="active"><a href="#">Action</a></li>
          <li><a href="#">Another action</a></li>
          <li><a href="#">Something else here</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="#">Separated link</a></li>
        </ul>
      </div>

    </div> <!-- /container --> -->



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0.beta6/handlebars.min.js"></script>
<script id="hit-template" type="text/x-handlebars-template">
  <div class="entry">
    <b>{{title}}</b><br>
    {{text}}
  </div>
</script>
<script type='text/javascript'>
  var hitTemplate = Handlebars.compile($("#hit-template").html());
  $("#search").click(function(){
    $("#rs").empty();
    $.getJSON("http://ec2-54-227-230-126.compute-1.amazonaws.com:8983/solr/proj4/select/?q=" + $("#searchterm").val() + "&wt=json&json.wrf=?&indent=true", function(result){
      for (var i = 0; i < result.response.docs.length; i++) {
        $("#rs").append(hitTemplate({title: result.response.docs[i].id, text: result.response.docs[i].text_en+" , "+result.response.docs[i].created_at }));
      }
    });
  });
</script>

		<script>$("#submit").click(function(){
				  
				  $("#Topics").show();		
				  $.getJSON("/demo.json",function(data,status){
				  alert("Data: "+data.topic+"\nStatus: "+status);
				  var topic=data.topic;
				  $("#Topics").html(topic);});				  
				  $("#Topics").show();						  
				});

    function QuerySolr(){
      var userInput = j$(".queryInput").val();
      if(userInput == "" || userInput == undefined){
        alert("Please input a search query");
      }else{
        console.log(userInput); //&bq=fieldA:X^3.0
        populateTweetDOM(userInput);
      }
    }
    
    
    function populateTweetDOM(userInput){
      j$.when(
        j$.ajax({
          url: url,
          jsonpCallback : 'getJSON',
          dataType: "json",
          type: "GET",
          async: false,
          crossDomain: true,
          error: function (xhr, status) {
            alert("error");
          }
        })).done(function(data) {
          var solrInstance = "http://ec2-54-227-230-126.compute-1.amazonaws.com:8983/solr/#/proj4";
          var url = solrInstance + "select?df=text_en"+"&fl=id,score,date,text_en&indent=on&q="+ userInput + "&wt=json&json.wrf=callback=getJSON";
          j$.when(
            j$.ajax({
              url: url,
              jsonpCallback : 'getJSON',
              jsonp: "$jsonp",
              dataType: "jsonp",
              type: "GET",
              crossDomain: true,
              error: function (xhr, error) {
                alert("error " + error);
              }
            })).done(function(data) {
              var htmlString = "";  
              
              if(htmlString != ""){
                
                //console.log(htmlString);
                htmlString = "<div class='tweetList'>" + htmlString + "</div>";
                console.log(htmlString);
                j$(".tweetSection").html("<h3>Related Tweets</h3><hr/>" + htmlString);
              }else{
                j$(".tweetSection").html("<h4>No Tweets Available</h4><hr/>");
              }
              paginateTweets();
            });
        });
    }
    
    function paginateTweets(){
    
      console.log("In Pagination");
      //how much items per page to show  
      var show_per_page = 15;  
      //getting the amount of elements inside content div  
      var number_of_items = $('.tweetList').children().size();  
      //calculate the number of pages we are going to have  
      var number_of_pages = Math.ceil(number_of_items/show_per_page);  
      console.log("number_of_items   " + number_of_items);
      console.log("number_of_pages   " + number_of_pages);
      //set the value of our hidden input fields  
      $('#current_page').val(0);  
      $('#show_per_page').val(show_per_page);  
      
      //now when we got all we need for the navigation let's make it '  
      
      /* 
      what are we going to have in the navigation? 
        - link to previous page 
        - links to specific pages 
        - link to next page 
      */  
      var navigation_html = '<a class="previous_link" href="javascript:previous();">Prev</a>';  
      var current_link = 0;  
      while(number_of_pages > current_link){  
        navigation_html += '<a class="page_link" href="javascript:go_to_page(' + current_link +')" longdesc="' + current_link +'">'+ (current_link + 1) +'</a>';  
        current_link++;  
      }  
      navigation_html += '<a class="next_link" href="javascript:next();">Next</a>';  
      
      $('#page_navigation').html(navigation_html);  
      
      //add active_page class to the first page link  
      $('#page_navigation .page_link:first').addClass('active_page');  
      
      //hide all the elements inside content div  
      $('.tweetList').children().css('display', 'none');  
      
      //and show the first n (show_per_page) elements  
      $('.tweetList').children().slice(0, show_per_page).css('display', 'block');  
    
    } 

			</script>

       <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/bootstrap-3.3.7/bootstrap-3.3.7/docs/assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="/bootstrap-3.3.7/bootstrap-3.3.7/docs/dist/js/bootstrap.min.js"></script>
    <script src="/bootstrap-3.3.7/bootstrap-3.3.7/docs/assets/js/docs.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/bootstrap-3.3.7/bootstrap-3.3.7/docs/assets/js/ie10-viewport-bug-workaround.js"></script>
    <script>$(document).ready(function(){
      $("#Topics").hide();
    });
    </script>


  </body>
</html>
